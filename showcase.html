<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Animation Co</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="showcaseStyles.css">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#main-content" class="skip-to-main">Skip to main content</a>
    
    <div class="lava-lamp lava-lamp-left">
        <div class="lava-blob"></div>
    </div>
    <div class="lava-lamp lava-lamp-right">
        <div class="lava-blob"></div>
    </div>
    
    <nav>
        <ul>
            <li><a href="index.html" class="page-transition-link active">Home</a></li>
            <li><a href="showcase.html" class="page-transition-link">Showcase</a></li>
            <li><a href="about.html" class="page-transition-link">About</a></li>
            <li><a href="services.html" class="page-transition-link">Services</a></li>
            <li><a href="contact.html" class="page-transition-link">Contact</a></li>
        </ul>
        <div class="nav-social">
            <a href="https://www.facebook.com" target="_blank"><i class="fab fa-facebook"></i></a>
            <a href="https://www.instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
        </div>
        <div class="nav-progress"></div>
    </nav>
    <main id="main-content">
        <div class="content-wrapper">
            <section id="home" class="top-slideshow">
                <div class="top-slide active">
                    <video autoplay loop muted playsinline>
                        <source src="showcase slideshow videos/1.mp4" type="video/mp4">
                    </video>
                    <div class="top-slide-content">
                        <h2>Innovative Web Solutions</h2>
                        <p>Crafting responsive and engaging websites for modern businesses</p>
                    </div>
                </div>
                <div class="top-slide">
                    <video autoplay loop muted playsinline>
                        <source src="showcase slideshow videos/2.mp4" type="video/mp4">
                    </video>
                    <div class="top-slide-content">
                        <h2>Creative Design</h2>
                        <p>Bringing your vision to life with stunning visuals and intuitive interfaces</p>
                    </div>
                </div>
                <div class="top-slide">
                    <video autoplay loop muted playsinline>
                        <source src="showcase slideshow videos/3.mp4" type="video/mp4">
                    </video>
                    <div class="top-slide-content">
                        <h2>Mobile-First Approach</h2>
                        <p>Ensuring seamless experiences across all devices and platforms</p>
                    </div>
                </div>
            </section>



<section class="sex-pistols-section">
    <div class="sex-pistols-left">
        <!-- Placeholder content -->
        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
            <h2>Left Column Content</h2>
        </div>
    </div>
    
    <div class="sex-pistols-right" id="pistolsImageContainer">
        <img src="website template content/Sex Pistols Expose Music/1.png" class="pistols-image" alt="Sex Pistols 1" style="animation-delay: 0s">
        <img src="website template content/Sex Pistols Expose Music/2.png" class="pistols-image" alt="Sex Pistols 2" style="animation-delay: 0.1s">
        <img src="website template content/Sex Pistols Expose Music/3.png" class="pistols-image" alt="Sex Pistols 3" style="animation-delay: 0.2s">
        <img src="website template content/Sex Pistols Expose Music/4.png" class="pistols-image" alt="Sex Pistols 4" style="animation-delay: 0.3s">
    </div>
</section>





            <section id="projects" class="showcase-section">
                <h1>Projects</h1>
                <div class="showcase-grid">
                    <div class="showcase-item">
                        <img src="website template content/BrewHaven Coffee/website-image.jpg" alt="BrewHaven Coffee Website">
                        <h3>BrewHaven Coffee</h3>
                        <p>A modern website for a cozy coffee shop, featuring online ordering and a loyalty program.</p>
                    </div>
                    <div class="showcase-item">
                        <img src="website template content/ChicCuts Hairdresser/website-image.jpg" alt="ChicCuts Hairdresser Website">
                        <h3>ChicCuts Hairdresser</h3>
                        <p>Stylish website for a trendy hair salon, with online booking and portfolio showcase.</p>
                    </div>
                    <div class="showcase-item">
                        <img src="website template content/GreenThread Fashion/website-image.jpg" alt="GreenThread Fashion Website">
                        <h3>GreenThread Fashion</h3>
                        <p>Eco-friendly fashion brand website with e-commerce integration and sustainability blog.</p>
                    </div>
                </div>
            </section>
            <spline-viewer url="https://prod.spline.design/G-MtdYgsebLntpma/scene.splinecode"></spline-viewer>

            <section id="film-production" class="film-production-container">
                <div class="film-production-videos">
                    <h2>Film Production</h2>
                    <div class="film-production-video">
                        <iframe src="https://www.youtube.com/embed/eKn2AvMSHWQ" frameborder="0" allowfullscreen></iframe>
                    </div>
                    <div class="film-production-video">
                        <iframe src="https://www.youtube.com/embed/qyxbC41titM" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
                <div id="mobile-projects" class="mobile-projects">
                    <h2>Mobile Projects</h2>
                    <div class="mobile-border">
                        <div class="mobile-slide active">
                            <video autoplay loop muted playsinline>
                                <source src="showcase slideshow videos/A.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="mobile-slide">
                            <video autoplay loop muted playsinline>
                                <source src="showcase slideshow videos/B.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="mobile-slide">
                            <video autoplay loop muted playsinline>
                                <source src="showcase slideshow videos/C.mp4" type="video/mp4">
                            </video>
                        </div>
                    </div>
                    <div class="mobile-info">
                        <h3>Innovative Mobile Solutions</h3>
                        <p>Our mobile projects showcase cutting-edge design and functionality, optimized for various platforms and devices.</p>
                    </div>
                    <div class="mobile-controls">
                        <button id="prevMobile">Previous</button>
                        <button id="nextMobile">Next</button>
                    </div>
                </div>
            </section>

   <section id="reels" class="reels-container">
                <div class="reels-column">
                    <h2>The Shining Reels</h2>
                    <div class="reel-videos">
                        <div class="reel-video-wrapper">
                            <video class="reel-video" loop playsinline>
                                <source src="film production/shining/1.mp4" type="video/mp4">
                            </video>
                            <div class="reel-overlay">
                                <div class="reel-controls">
                                    <button class="play-pause">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="audio-control">
                                        <i class="fas fa-volume-mute"></i>
                                    </button>
                                    <button class="fullscreen">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="reel-video-wrapper">
                            <video class="reel-video" loop playsinline>
                                <source src="film production/shining/2.mp4" type="video/mp4">
                            </video>
                            <div class="reel-overlay">
                                <div class="reel-controls">
                                    <button class="play-pause">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="audio-control">
                                        <i class="fas fa-volume-mute"></i>
                                    </button>
                                    <button class="fullscreen">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="reels-column">
                    <h2>Spider-Man Reels</h2>
                    <div class="reel-videos">
                        <div class="reel-video-wrapper">
                            <video class="reel-video" loop playsinline>
                                <source src="film production/spiderman/1.mp4" type="video/mp4">
                            </video>
                            <div class="reel-overlay">
                                <div class="reel-controls">
                                    <button class="play-pause">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="audio-control">
                                        <i class="fas fa-volume-mute"></i>
                                    </button>
                                    <button class="fullscreen">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="reel-video-wrapper">
                            <video class="reel-video" loop playsinline>
                                <source src="film production/spiderman/2.mp4" type="video/mp4">
                            </video>
                            <div class="reel-overlay">
                                <div class="reel-controls">
                                    <button class="play-pause">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="audio-control">
                                        <i class="fas fa-volume-mute"></i>
                                    </button>
                                    <button class="fullscreen">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="contact" class="details-section">
                <div class="product-details">
                    <h2>Product Details</h2>
                    <ul>
                        <li><i class="fas fa-check-circle"></i> Custom responsive designs tailored to your brand</li>
                        <li><i class="fas fa-check-circle"></i> Interactive user interfaces for enhanced engagement</li>
                        <li><i class="fas fa-check-circle"></i> Optimized for performance and SEO to boost visibility</li>
                        <li><i class="fas fa-check-circle"></i> Cross-browser compatibility for wide accessibility</li>
                        <li><i class="fas fa-check-circle"></i> Integration with various APIs and services for extended functionality</li>
                        <li><i class="fas fa-check-circle"></i> Mobile-first approach ensuring seamless experiences across devices</li>
                        <li><i class="fas fa-check-circle"></i> Scalable solutions to grow with your business needs</li>
                    </ul>
                </div>
                <div class="contact-form">
                    <h2>Get in Touch</h2>
                    <form>
                        <input type="text" name="name" placeholder="Your Name" required>
                        <input type="email" name="email" placeholder="Your Email" required>
                        <textarea name="message" placeholder="Your Message" required></textarea>
                        <button type="submit">Send Message</button>
                    </form>
                </div>
            </section>
        </div>
    </main>
</div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Us</h3>
                <p>We are a creative agency specializing in web design, development, and digital marketing solutions. Our mission is to help businesses thrive in the digital landscape through innovative and tailored solutions.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html" class="page-transition-link">Home</a></li>
                    <li><a href="showcase.html" class="page-transition-link">Showcase</a></li>
                    <li><a href="about.html" class="page-transition-link">About</a></li>
                    <li><a href="services.html" class="page-transition-link">Services</a></li>
                    <li><a href="contact.html" class="page-transition-link">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Information</h3>
                <ul>
                    <li><i class="fas fa-map-marker-alt"></i> Neath, Swansea, Wales, UK</li>
                    <li><i class="fas fa-globe"></i> + Worldwide Customers</li>
                    <li><i class="fas fa-phone"></i> +44 7478773451</li>
                    <li><i class="fas fa-envelope"></i> joe@websiteanimation.co.uk</li>
                </ul>
            </div>
        </div>
        <div class="footer-social-icons">
            <a href="#" target="_blank"><i class="fab fa-facebook"></i></a>
            <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Website Animation Co. All rights reserved.</p>
        </div>
    </footer>

    <a href="#" class="whatsapp-button">
        <i class="fab fa-whatsapp"></i>
        <span>WhatsApp Us</span>
    </a>
    <a href="#" class="chat-button">
        <i class="fas fa-comment"></i>
        <span>Chat with us</span>
    </a>

    <div class="chat-box email">
        <div class="chat-box-header">Chat with us</div>
        <div class="chat-box-body"></div>
        <div class="chat-box-footer">
            <input type="text" placeholder="Type your message...">
        </div>
    </div>

    <div class="chat-box whatsapp">
        <div class="chat-box-header">WhatsApp Chat</div>
        <div class="chat-box-body"></div>
        <div class="chat-box-footer">
            <input type="text" placeholder="Type your message...">
        </div>
    </div>

    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.9.32/build/spline-viewer.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // ==================
    // PAGE TRANSITIONS
    // ==================
    const transitionLinks = document.querySelectorAll('nav a, .footer-section a');
    
    transitionLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            if(!this.classList.contains('active')) {
                e.preventDefault();
                const target = this.getAttribute('href');
                
                // Get all elements
                const navbar = document.querySelector('nav');
                const footer = document.querySelector('footer');
                const mainContent = document.querySelector('main');
                const allPageElements = mainContent.querySelectorAll('section, .featured-project, .film-production-video, .mobile-border, .reel-item, .product-details, .contact-form');
                
                // Navbar transition - up and fade
                navbar.style.cssText = `
                    animation: navExitUp 0.5s ease forwards;
                    transform-origin: top;
                `;
                
                // Footer transition - down and fade
                footer.style.cssText = `
                    animation: footerExitDown 0.5s ease forwards;
                    transform-origin: bottom;
                `;
                
                // All content elements - left and fade
                allPageElements.forEach(element => {
                    element.style.cssText = `
                        animation: contentExitLeft 0.5s ease forwards;
                        transform-origin: left;
                    `;
                });

                // Navigate after animation
                setTimeout(() => {
                    window.location.href = target;
                }, 500);
            }
        });
    });

    // ==================
    // NAVIGATION ACTIVE STATE
    // ==================
    document.querySelectorAll('nav a').forEach(link => {
        link.classList.remove('active');
        if(link.getAttribute('href') === window.location.pathname.split('/').pop()) {
            link.classList.add('active');
        }
    });

    // ==================
    // TOP SLIDESHOW
    // ==================
    const topSlides = document.querySelectorAll('.top-slide');
    let currentTopSlide = 0;

    function showTopSlide(n) {
        topSlides[currentTopSlide].classList.remove('active');
        currentTopSlide = (n + topSlides.length) % topSlides.length;
        topSlides[currentTopSlide].classList.add('active');
    }

    if(topSlides.length > 0) {
        setInterval(() => showTopSlide(currentTopSlide + 1), 5000);
    }

    // ==================
    // MOBILE PROJECTS
    // ==================
    const mobileBorder = document.querySelector('.mobile-border');
    const mobileSlides = document.querySelectorAll('.mobile-slide');
    let currentMobileSlide = 0;
    const prevMobileBtn = document.getElementById('prevMobile');
    const nextMobileBtn = document.getElementById('nextMobile');

    if(mobileBorder) {
        mobileBorder.addEventListener('click', () => {
            mobileBorder.classList.toggle('expanded');
        });
    }

    function showMobileSlide(n) {
        mobileSlides[currentMobileSlide].classList.remove('active');
        currentMobileSlide = (n + mobileSlides.length) % mobileSlides.length;
        mobileSlides[currentMobileSlide].classList.add('active');
    }

    if(prevMobileBtn && nextMobileBtn) {
        prevMobileBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showMobileSlide(currentMobileSlide - 1);
        });
        nextMobileBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showMobileSlide(currentMobileSlide + 1);
        });
    }

    // ==================
    // NAVBAR SCROLL EFFECT
    // ==================
    function updateNavbar() {
        const nav = document.querySelector('nav');
        const scrollPosition = window.scrollY;
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const scrollPercentage = (scrollPosition / (documentHeight - windowHeight)) * 100;
        
        document.querySelector('.nav-progress').style.width = `${scrollPercentage}%`;
        
        if (scrollPosition > 50) {
            nav.classList.add('scrolled');
        } else {
            nav.classList.remove('scrolled');
        }
    }

    // ==================
    // CHAT FUNCTIONALITY
    // ==================
    const setupChatBox = (buttonClass, boxClass, type) => {
        const button = document.querySelector(`.${buttonClass}`);
        const chatBox = document.querySelector(`.chat-box.${type}`);
        let isOpen = false;

        if (button && chatBox) {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                isOpen = !isOpen;
                chatBox.style.display = isOpen ? 'flex' : 'none';
                
                const otherBox = document.querySelector(`.chat-box.${type === 'email' ? 'whatsapp' : 'email'}`);
                if (otherBox) {
                    otherBox.style.display = 'none';
                }
            });

            const input = chatBox.querySelector('input');
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const message = input.value.trim();
                    if (message) {
                        const messageElement = document.createElement('p');
                        messageElement.classList.add('user-message');
                        messageElement.textContent = message;
                        chatBox.querySelector('.chat-box-body').appendChild(messageElement);

                        if (type === 'email') {
                            window.location.href = `mailto:joe@websiteanimation.co.uk?subject=Chat Message&body=${encodeURIComponent(message)}`;
                        } else {
                            window.open(`https://wa.me/447478773451?text=${encodeURIComponent(message)}`, '_blank');
                        }

                        input.value = '';
                    }
                }
            });
        }
    };

    // Initialize chat boxes
    setupChatBox('chat-button', 'email', 'email');
    setupChatBox('whatsapp-button', 'whatsapp', 'whatsapp');

    // ==================
    // CONTACT FORM
    // ==================
    const contactForm = document.querySelector('.contact-form form');
    if(contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const mailtoLink = `mailto:joe@websiteanimation.co.uk?subject=Website Inquiry&body=Name: ${formData.get('name')}%0D%0AEmail: ${formData.get('email')}%0D%0AMessage: ${formData.get('message')}`;
            window.location.href = mailtoLink;
        });
    }

    // ==================
    // SMOOTH SCROLLING
    // ==================
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if(target) {
                target.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });

    // ==================
    // REELS FUNCTIONALITY
    // ==================
    const videoWrappers = document.querySelectorAll('.reel-video-wrapper');
    
    // Video arrays
    const shiningVideos = [
        'film production/shining/1.mp4',
        'film production/shining/2.mp4',
        'film production/shining/3.mp4',
        'film production/shining/4.mp4',
        'film production/shining/5.mp4'
    ];

    const spidermanVideos = [
        'film production/spiderman/1.mp4',
        'film production/spiderman/2.mp4',
        'film production/spiderman/3.mp4',
        'film production/spiderman/4.mp4',
        'film production/spiderman/5.mp4',
        'film production/spiderman/6.mp4',
        'film production/spiderman/7.mp4',
        'film production/spiderman/8.mp4'
    ];

    // Setup video controls and behavior
    videoWrappers.forEach(wrapper => {
        const video = wrapper.querySelector('.reel-video');
        const playPauseBtn = wrapper.querySelector('.play-pause');
        const audioBtn = wrapper.querySelector('.audio-control');
        const fullscreenBtn = wrapper.querySelector('.fullscreen');
        const playIcon = playPauseBtn.querySelector('i');
        const audioIcon = audioBtn.querySelector('i');
        
        // Set initial states
        video.muted = true;
        
        // Hover functionality
        wrapper.addEventListener('mouseenter', () => {
            video.play();
            playIcon.classList.replace('fa-play', 'fa-pause');
        });

        wrapper.addEventListener('mouseleave', () => {
            video.pause();
            playIcon.classList.replace('fa-pause', 'fa-play');
            video.muted = true;
            audioIcon.classList.replace('fa-volume-up', 'fa-volume-mute');
        });

        // Play/Pause functionality
        playPauseBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (video.paused) {
                video.play();
                playIcon.classList.replace('fa-play', 'fa-pause');
            } else {
                video.pause();
                playIcon.classList.replace('fa-pause', 'fa-play');
            }
        });

        // Audio functionality
        audioBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            video.muted = !video.muted;
            audioIcon.classList.replace(
                video.muted ? 'fa-volume-up' : 'fa-volume-mute',
                video.muted ? 'fa-volume-mute' : 'fa-volume-up'
            );
        });

        // Fullscreen functionality
        fullscreenBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (!document.fullscreenElement) {
                video.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        });
    });

    // Setup video rotation
    function setupVideoRotation(wrappers, videoList) {
        let currentIndices = [0, Math.floor(videoList.length / 2)]; // Start at different points

        wrappers.forEach((wrapper, index) => {
            const video = wrapper.querySelector('.reel-video');
            video.muted = true;

            video.addEventListener('ended', function() {
                // Find next available index that's not playing in the other video
                let nextIndex;
                do {
                    currentIndices[index] = (currentIndices[index] + 1) % videoList.length;
                    nextIndex = currentIndices[index];
                } while (currentIndices.filter((_, i) => i !== index).includes(nextIndex));

                video.src = videoList[nextIndex];
                video.play();
            });

            // Start playing from different initial positions
            video.src = videoList[currentIndices[index]];
            video.play().catch(function(error) {
                console.log("Video autoplay failed:", error);
            });
        });
    }

    // Initialize video rotation
    const shiningWrappers = Array.from(document.querySelectorAll('.reels-column:first-child .reel-video-wrapper'));
    const spidermanWrappers = Array.from(document.querySelectorAll('.reels-column:last-child .reel-video-wrapper'));

    setupVideoRotation(shiningWrappers, shiningVideos);
    setupVideoRotation(spidermanWrappers, spidermanVideos);

    // ==================
    // VIDEO HANDLING
    // ==================
    const videos = document.querySelectorAll('video');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.play();
            } else {
                entry.target.pause();
            }
        });
    }, { threshold: 0.5 });

    videos.forEach(video => {
        observer.observe(video);
    });

    // ==================
    // EVENT LISTENERS
    // ==================
    window.addEventListener('scroll', () => {
        requestAnimationFrame(updateNavbar);
    });

    window.addEventListener('load', () => {
        updateNavbar();
        document.body.classList.add('loaded');
    });

    // ==================
    // INITIALIZATION
    // ==================
    updateNavbar();
});

//sexpistolsexpose 


// Sex Pistols Image Gallery Controller
const pistolsImageContainer = document.getElementById('pistolsImageContainer');
let currentPistolsImages = [1, 2, 3, 4];
const totalPistolsImages = 21;
let isTransitioning = false;

// Function to get random unique image numbers
function getUniqueRandomImages() {
    const usedNumbers = new Set(currentPistolsImages);
    const newImages = [];
    
    while (newImages.length < 4) {
        const newNum = Math.floor(Math.random() * totalPistolsImages) + 1;
        if (!usedNumbers.has(newNum) && !newImages.includes(newNum)) {
            newImages.push(newNum);
            usedNumbers.add(newNum);
        }
    }
    
    return newImages;
}

// Function to animate image change
function animateImageChange(imageElement, newImageNum) {
    return new Promise((resolve) => {
        imageElement.style.opacity = '0';
        imageElement.style.transform = 'scale(0.95)';
        
        setTimeout(() => {
            imageElement.src = `website template content/Sex Pistols Expose Music/${newImageNum}.png`;
            imageElement.alt = `Sex Pistols ${newImageNum}`;
            
            // Trigger reflow
            imageElement.offsetHeight;
            
            imageElement.style.opacity = '0.8';
            imageElement.style.transform = 'scale(1)';
            
            setTimeout(resolve, 300);
        }, 300);
    });
}

// Function to rotate all images
async function rotateImages() {
    if (isTransitioning) return;
    isTransitioning = true;
    
    const newImages = getUniqueRandomImages();
    const images = Array.from(pistolsImageContainer.getElementsByTagName('img'));
    
    // Animate all images with slight delay between each
    for (let i = 0; i < images.length; i++) {
        await animateImageChange(images[i], newImages[i]);
        await new Promise(resolve => setTimeout(resolve, 100));
    }
    
    currentPistolsImages = newImages;
    isTransitioning = false;
}

// Function to handle fullscreen view
function handleFullscreenView(image) {
    const fullscreenContainer = document.createElement('div');
    fullscreenContainer.className = 'fullscreen-container';
    fullscreenContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 0;
        transition: opacity 0.3s ease;
    `;

    const fullscreenImage = document.createElement('img');
    fullscreenImage.src = image.src;
    fullscreenImage.alt = image.alt;
    fullscreenImage.style.cssText = `
        max-width: 90vw;
        max-height: 90vh;
        object-fit: contain;
        border-radius: 20px;
        transform: scale(0.9);
        transition: transform 0.3s ease;
    `;

    fullscreenContainer.appendChild(fullscreenImage);
    document.body.appendChild(fullscreenContainer);

    // Trigger animation
    requestAnimationFrame(() => {
        fullscreenContainer.style.opacity = '1';
        fullscreenImage.style.transform = 'scale(1)';
    });

    // Close on click or escape
    const closeFullscreen = () => {
        fullscreenContainer.style.opacity = '0';
        fullscreenImage.style.transform = 'scale(0.9)';
        setTimeout(() => fullscreenContainer.remove(), 300);
    };

    fullscreenContainer.addEventListener('click', closeFullscreen);
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeFullscreen();
    });
}

// Initialize the gallery
function initializePistolsGallery() {
    if (!pistolsImageContainer) return;

    // Set up click handlers
    pistolsImageContainer.querySelectorAll('.pistols-image').forEach(image => {
        image.addEventListener('click', () => handleFullscreenView(image));
    });

    // Start rotation with random intervals
    function scheduleNextRotation() {
        const randomDelay = 3000 + Math.random() * 2000; // 3-5 seconds
        setTimeout(() => {
            rotateImages().then(() => {
                scheduleNextRotation();
            });
        }, randomDelay);
    }

    scheduleNextRotation();
}

// Start when DOM is loaded
document.addEventListener('DOMContentLoaded', initializePistolsGallery);

</script>


</body>
</html>
